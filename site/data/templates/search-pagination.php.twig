{% if count > 1 %}

    {# the number of first and last pages to be displayed #}
    {% set extremePagesLimit = 3 %}

    {# the number of pages that are displayed around the active page #}
    {% set nearbyPagesLimit = 2 %}

    <div data-ajax="loadLink" data-ajax-to=".region_content" class="pagination">
        {#<div class="pagination">#}
        {% if currentPage > 1 %}
            <a href="/search?search={{ search }}&page={{ currentPage - 1 }}">Предыдущая</a>

            {% for i in range(1, extremePagesLimit) if ( i < currentPage - nearbyPagesLimit ) %}
                <a href="/search?search={{ search }}&page={{ i }}">{{ i }}</a>
            {% endfor %}

            {% if extremePagesLimit + 1 < currentPage - nearbyPagesLimit %}
                <span class="sep-dots">...</span>
                {#<a href="/product/{{ category.id }}/{{ currentPage + 100 }}">...</a>#}
            {% endif %}

            {% for i in range(currentPage-nearbyPagesLimit, currentPage-1) if ( i > 0 ) %}
                <a href="/search?search={{ search }}&page={{ i }}">{{ i }}</a>
            {% endfor %}
        {% elseif showAlwaysFirstAndLast %}
            <span class="disabled">Предыдущая</span>
        {% endif %}

        <a href="/search?search={{ search }}&page={{ currentPage }}"
           class="active">{{ currentPage }}</a>

        {% if currentPage < count %}
            {% for i in range(currentPage+1, currentPage + nearbyPagesLimit) if ( i <= count ) %}
                <a href="/search?search={{ search }}&page={{ i }}">{{ i }}</a>
            {% endfor %}

            {% if  (count - extremePagesLimit) > (currentPage + nearbyPagesLimit) %}
                <span class="sep-dots">...</span>
            {% endif %}

            {% for i in range(count - extremePagesLimit+1, count) if ( i > currentPage + nearbyPagesLimit ) %}
                <a href="/search?search={{ search }}&page={{ i }}">{{ i }}</a>
            {% endfor %}

            <a href="/search?search={{ search }}&page={{ currentPage + 1 }}">Следующая</a>
        {% elseif showAlwaysFirstAndLast %}
            <span class="disabled">Следующая</span>
        {% endif %}
    </div>
{% endif %}
